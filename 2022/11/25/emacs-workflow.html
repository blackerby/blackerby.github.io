<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Emacs Workflow | William Blackerby</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Emacs Workflow" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We’ve run prep.sh (and with it, get_summaries.py), so now we’ve got a directory full of text files to review. This is where GNU Emacs comes in." />
<meta property="og:description" content="We’ve run prep.sh (and with it, get_summaries.py), so now we’ve got a directory full of text files to review. This is where GNU Emacs comes in." />
<link rel="canonical" href="https://blackerby.github.io/2022/11/25/emacs-workflow.html" />
<meta property="og:url" content="https://blackerby.github.io/2022/11/25/emacs-workflow.html" />
<meta property="og:site_name" content="William Blackerby" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-11-25T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Emacs Workflow" />
<script type="application/ld+json">
{"description":"We’ve run prep.sh (and with it, get_summaries.py), so now we’ve got a directory full of text files to review. This is where GNU Emacs comes in.","headline":"Emacs Workflow","dateModified":"2022-11-25T00:00:00+00:00","url":"https://blackerby.github.io/2022/11/25/emacs-workflow.html","datePublished":"2022-11-25T00:00:00+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blackerby.github.io/2022/11/25/emacs-workflow.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://blackerby.github.io/feed.xml" title="William Blackerby" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/">William Blackerby</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Emacs Workflow</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-11-25T00:00:00+00:00" itemprop="datePublished">Nov 25, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>We’ve run <a href="https://blackerby.github.io/2022/11/23/prep.html">prep.sh</a> (and with it, <a href="https://blackerby.github.io/2022/11/24/get-summaries.html">get_summaries.py</a>), so now we’ve got a directory full of text files to review.  This is where <a href="https://www.gnu.org/software/emacs/" target="_blank" rel="noopener noreferrer">GNU Emacs</a> comes in.</p>

<p>Initially, I was doing all of this work on the command line, using <a href="https://iterm2.com/" target="_blank" rel="noopener noreferrer">iTerm2</a> on my Mac.  I had a <a href="https://github.com/blackerby/llc_pdf_etl_workflow/commit/9416a664bf2e1b946060c4e7a1110edaf75c4557#diff-946a9298fc35569de8840dcfaabf1ab6a8e6334318c81b9a0b0590c2fad56184" target="_blank" rel="noopener noreferrer">script</a> that ran <a href="http://aspell.net/" target="_blank" rel="noopener noreferrer">aspell</a> on each text file before opening <a href="https://neovim.io/" target="_blank" rel="noopener noreferrer">Neovim</a> for each file for manual review.  It worked fine, but it wasn’t very flexible, and to be honest, I’ve always wanted to become proficient in Emacs.  This project presented me with a great opportunity to it a daily driver.</p>

<p>In the interest of keeping this post shorter than the last one, I’ll describe the workflow I landed on and not all the steps along the way.</p>

<h1 id="finding-the-directory">Finding the Directory</h1>
<p>Within Emacs, I use <code class="language-plaintext highlighter-rouge">C-x d</code> to navigate to the directory created by <code class="language-plaintext highlighter-rouge">prep.sh</code>, e.g., <code class="language-plaintext highlighter-rouge">74_2_199</code>.  This opens <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html" target="_blank" rel="noopener noreferrer">Dired</a>, the Emacs Directory Editor, where I next run <code class="language-plaintext highlighter-rouge">dired-omit-mode</code> with <code class="language-plaintext highlighter-rouge">C-x M-o</code> to hide uninteresting files (e.g., backup files that end with <code class="language-plaintext highlighter-rouge">~</code> and <code class="language-plaintext highlighter-rouge">.bak</code>).</p>

<h1 id="editing-the-files">Editing the Files</h1>
<p>Now, I use <code class="language-plaintext highlighter-rouge">n</code> and <code class="language-plaintext highlighter-rouge">p</code> to navigate between the listed files, hitting the enter key to open the file I’d like to edit.  Within each file, I run <code class="language-plaintext highlighter-rouge">M-x ispell</code> with aspell as the backend for some automated spell-checking.  I remove any weird entities introduced by OCR fix up line and paragraph breaks.</p>

<p>There are two really important elements of this step:</p>
<ol>
  <li>Enter metadata about bill actions besides introduction into the spreadsheet</li>
  <li>Make sure the name of the file corresponds to the date of the latest action on the bill.</li>
</ol>

<p>Putting the data into Google Sheets is pretty straightforward, except for a couple of steps at the end of this element of the workflow that I’ll detail later in the post.</p>

<p>If I need to edit the name of the file, I do this back in the Dired buffer using the <code class="language-plaintext highlighter-rouge">R</code> key, making sure to change the name in the spreadsheet as well.</p>

<h1 id="finalizing-the-spreadsheet-data">Finalizing the spreadsheet data</h1>
<p>Before wrapping up this element of the workflow, I do two things:</p>

<ol>
  <li>I type the date into the spreadsheet as written in the original document, e.g., May 1, 1936, but I eventually reformat it into <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO 8601</a> using <code class="language-plaintext highlighter-rouge">Format &gt; Number</code> in Google Sheets for some easier processing in SQLite later in the workflow.</li>
  <li>I fill down the <code class="language-plaintext highlighter-rouge">Session</code> column with the formula <code class="language-plaintext highlighter-rouge">=if(year(L2088)=1935, 1, 2)</code> (the L column is the <code class="language-plaintext highlighter-rouge">Action Date</code> column).</li>
</ol>

<h1 id="cleaning-up-and-next-steps">Cleaning up and next steps</h1>
<p>Finally within Emacs I run the script <code class="language-plaintext highlighter-rouge">cleanup.sh</code>, which will be explained in the next post, using the <code class="language-plaintext highlighter-rouge">M-x !</code> key with the argument <code class="language-plaintext highlighter-rouge">../cleanup.sh</code>.</p>

  </div>
<a class="u-url" href="/2022/11/25/emacs-workflow.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">William Blackerby</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">William Blackerby</li>
<li><a class="u-email" href="mailto:wmblackerby@gmail.com">wmblackerby@gmail.com</a></li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/blackerby" target="_blank" rel="noopener noreferrer"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">blackerby</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>William Blackerby's home on the web.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
